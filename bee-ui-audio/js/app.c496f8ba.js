(function(t){function e(e){for(var i,n,o=e[0],u=e[1],c=e[2],d=0,l=[];d<o.length;d++)n=o[d],a[n]&&l.push(a[n][0]),a[n]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);h&&h(e);while(l.length)l.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,n=1;n<s.length;n++){var o=s[n];0!==a[o]&&(i=!1)}i&&(r.splice(e--,1),t=u(u.s=s[0]))}return t}var i={},n={app:0},a={app:0},r=[];function o(t){return u.p+"js/"+({audio:"audio"}[t]||t)+"."+{audio:"cc6c5b74"}[t]+".js"}function u(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}u.e=function(t){var e=[],s={audio:1};n[t]?e.push(n[t]):0!==n[t]&&s[t]&&e.push(n[t]=new Promise(function(e,s){for(var i="css/"+({audio:"audio"}[t]||t)+"."+{audio:"038a2cad"}[t]+".css",a=u.p+i,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var c=r[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===a))return e()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){c=l[o],d=c.getAttribute("data-href");if(d===i||d===a)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var i=e&&e.target&&e.target.src||a,r=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");r.request=i,delete n[t],h.parentNode.removeChild(h),s(r)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)}).then(function(){n[t]=0}));var i=a[t];if(0!==i)if(i)e.push(i[2]);else{var r=new Promise(function(e,s){i=a[t]=[e,s]});e.push(i[2]=r);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,u.nc&&d.setAttribute("nonce",u.nc),d.src=o(t),c=function(e){d.onerror=d.onload=null,clearTimeout(l);var s=a[t];if(0!==s){if(s){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,r=new Error("Loading chunk "+t+" failed.\n("+i+": "+n+")");r.type=i,r.request=n,s[1](r)}a[t]=void 0}};var l=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},u.m=t,u.c=i,u.d=function(t,e,s){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(u.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)u.d(s,i,function(e){return t[e]}.bind(null,i));return s},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/bee-ui-audio/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var h=d;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0072":function(t,e,s){},"14f8":function(t,e,s){"use strict";var i=s("75c2"),n=s.n(i);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},a=[],r=(s("7c55"),s("2877")),o={},u=Object(r["a"])(o,n,a,!1,null,null,null),c=u.exports,d=s("8c4f");i["a"].use(d["a"]);var l=new d["a"]({routes:[{path:"/",name:"example",component:function(){return s.e("audio").then(s.bind(null,"ef5c"))}}]}),h=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bee-audio-component",on:{mousemove:t.seeking,mouseup:t.seeked,mouseleave:t.seeked}},[s("div",{staticClass:"btns--wp"},["play"===t.status?s("i",{staticClass:"audio--btn audio--btn__play",on:{click:t.play}}):"stop"===t.status?s("i",{staticClass:"audio--btn audio--btn__stop",on:{click:t.pause}}):s("i",{staticClass:"audio--btn audio--btn__loading"})]),s("div",{staticClass:"time--bars"},[s("div",{ref:"duration",staticClass:"time--bar total--bar",style:{width:t.barsWidth.duration},on:{click:t.barOnClick}}),s("div",{staticClass:"time--bar buffered--bar",style:{width:t.barsWidth.buffered},on:{click:t.barOnClick}}),s("div",{staticClass:"time--bar played--bar",style:{width:t.barsWidth.current},on:{click:t.barOnClick}}),s("div",{ref:"timeBtn",staticClass:"time--btn",style:{left:t.btnLeft},on:{mousedown:t.seekStart}})]),s("div",{staticClass:"audio--duration"},[t._v("\n    "+t._s(t._f("duration2str")(t.times.duration-t.times.current))+"\n  ")]),t.speeds?s("div",{staticClass:"audio--speed",on:{click:t.openSpeedsPanel}},[t._v(t._s(t._f("speed2str")(t.speed)))]):t._e(),t.speeds?s("ul",{class:["speed--select",{"speed--select__visible":t.speedsVisible}]},t._l(t.speeds,function(e){return s("li",{key:e,class:["speed--item",{item__active:t.speed===e}],on:{click:function(s){return t.setPlayRate(e)}}},[t._v(t._s(t._f("speed2str")(e)))])}),0):t._e(),s("audio",{ref:"audio",attrs:{controls:"controls"},on:{waiting:t.onWaiting,loadstart:t.onLoadstart,loadeddata:t.onLoadeddata,playing:t.onPlaying,timeupdate:t.onTimeUpdate,ended:t.onEnded,error:t.onError,stalled:t.onStalled,durationchange:t.onDurationchange}},[s("source",{attrs:{src:t.source,type:"audio/mpeg"}})])])}),f=[],p=s("75fc"),m=(s("14b9"),{name:"BeeAudio",props:{source:{type:String},autoPlay:Boolean,loop:Boolean,repeat:{type:Array,validator:function(t){return 2===t.length&&/^\d+-\d+$/.test(t.join("-"))}},speeds:{type:Array,validator:function(t){return/^[\d.]+$/.test(t.join(""))}}},data:function(){return{audio:null,status:"play",speedsVisible:!1,speed:1,times:{duration:null,current:null,buffered:null},seek:{switch:!1,stash:null},timeout:null}},computed:{barsWidth:function(){return{duration:"100%",buffered:this.times.buffered&&this.times.duration?"".concat(Math.min(this.times.buffered/this.times.duration*100,100),"%"):"0%",current:this.times.current&&this.times.duration?"".concat(Math.min(this.times.current/this.times.duration*100,100),"%"):"0%"}},btnLeft:function(){if(!this.times.current||!this.times.duration||!this.$refs.duration)return null;var t=this.$refs.duration.offsetWidth,e=this.times.current/this.times.duration*t-this.$refs.timeBtn.offsetWidth/2;return"".concat(Math.floor(e),"px")}},filters:{duration2str:function(t){if(null===t||void 0===t)return"--:--";var e=Math.floor(t%60),s=Math.floor(t/60%60);return"".concat(s<10?"0"+s:s,":").concat(e<10?"0"+e:e)},speed2str:function(t){return t&&1!==t?"".concat(t,"x"):"正常"}},mounted:function(){var t=this;this.$nextTick(function(){t.audio=t.$refs.audio})},methods:{onWaiting:function(t){var e=this;this.timeout=setTimeout(function(){e.status="loading"},10)},onLoadstart:function(t){if(!this.source)return this.message({type:"error",step:"loadstart",text:"无法获取音频"}),null;this.status="loading"},onDurationchange:function(t){var e=t.target;this.$set(this.times,"duration",e.duration)},onLoadeddata:function(t){var e=t.target;this.status="play",this.$set(this.times,"duration",e.duration);try{this.$set(this.times,"buffered",e.buffered.end(0))}catch(s){console.warn(s)}this.autoPlay&&this.play()},onPlaying:function(t){this.timeout&&clearTimeout(this.timeout),"stop"!==this.status&&(this.status="stop")},onTimeUpdate:function(t){var e=t.target;this.seek.switch||this.$set(this.times,"current",e.currentTime),this.$set(this.times,"duration",e.duration),this.$set(this.times,"buffered",e.buffered.end(0)),this.repeat&&e.currentTime>=Math.max.apply(Math,Object(p["a"])(this.repeat))&&(this.loop?e.currentTime=Math.min.apply(Math,Object(p["a"])(this.repeat)):this.pause())},onEnded:function(t){this.status="play",this.$emit("ended",this.audio),this.loop&&this.play()},onError:function(t){this.message({type:"error",step:"error",text:"音频播放发生了意外"}),this.status="play"},onStalled:function(t){this.message({type:"error",step:"stalled",text:"获取音频失败"}),this.status="play"},play:function(){this.source?(this.repeat&&(this.audio.currentTime=Math.min.apply(Math,Object(p["a"])(this.repeat))),this.status="stop",this.audio.play(),this.$emit("play",this.audio)):this.message({type:"error",step:"play",text:"无法获取音频资源"})},pause:function(){this.status="play",this.audio.pause(),this.$emit("pause",this.audio)},message:function(t){this.$emit("message",t)},openSpeedsPanel:function(){this.speedsVisible=!0},closeSpeedsPanel:function(){this.speedsVisible=!1},setPlayRate:function(t){this.speed=t,this.closeSpeedsPanel()},seekStart:function(t){this.$set(this.seek,"switch",!0),this.$set(this.seek,"stash",{x:t.pageX,currentTime:this.times.current>>0})},seeking:function(t){if(this.seek.switch){var e=(t.pageX-this.seek.stash.x)/this.$refs.duration.offsetWidth*this.times.duration;Math.round(e)+this.seek.stash.currentTime<0?this.$set(this.times,"current",0):Math.round(e)+this.seek.stash.currentTime>this.times.duration?this.$set(this.times,"current",this.times.duration):this.$set(this.times,"current",Math.round(e+this.seek.stash.currentTime))}},seeked:function(t){this.seek.switch&&(this.audio.currentTime=this.times.current,this.$set(this.seek,"switch",!1))},barOnClick:function(t){var e=this.$refs.duration.getBoundingClientRect(),s=e.left,i=e.width,n=(t.pageX-s)/i*this.times.duration;this.audio.currentTime=n}},watch:{speed:function(t,e){t!==e&&this.audio&&(this.audio.playbackRate=t)}}}),b=m,v=(s("14f8"),Object(r["a"])(b,h,f,!1,null,null,null)),y=v.exports,g=function t(e){if(t.installed)return!1;e.component(y.name,y)},k=g,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"demo-block"},[s("div",{staticClass:"demo-block-source"},[t._t("source"),t.$slots.default?t._e():s("span",{staticClass:"demo-block-code-icon",on:{click:function(e){t.showCode=!t.showCode}}},[t.showCode?s("span",[t._v("收起代码")]):s("span",[t._v("查看代码")])])],2),t.$slots.default?s("div",{staticClass:"demo-block-meta"},[t._t("default"),t.$slots.default?s("span",{staticClass:"demo-block-code-icon",on:{click:function(e){t.showCode=!t.showCode}}},[t.showCode?s("span",[t._v("收起代码")]):s("span",[t._v("查看代码")])]):t._e()],2):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCode,expression:"showCode"}],staticClass:"demo-block-code"},[t._t("highlight")],2)])},_=[],C={name:"DemoBlock",data:function(){return{showCode:!1}}},$=C,T=(s("c34d"),Object(r["a"])($,w,_,!1,null,null,null)),x=T.exports;i["a"].config.productionTip=!1,i["a"].component("DemoBlock",x),i["a"].use(k),new i["a"]({router:l,render:function(t){return t(c)}}).$mount("#app")},"5c48":function(t,e,s){},"75c2":function(t,e,s){},"7c55":function(t,e,s){"use strict";var i=s("5c48"),n=s.n(i);n.a},c34d:function(t,e,s){"use strict";var i=s("0072"),n=s.n(i);n.a}});
//# sourceMappingURL=app.c496f8ba.js.map